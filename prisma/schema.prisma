generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = "postgres://default:7OgDapFqt0vI@ep-shy-scene-31828553-pooler.us-east-1.aws.neon.tech:5432/verceldb?sslmode=require&pgbouncer=true&connect_timeout=15"
    directUrl = "postgres://default:7OgDapFqt0vI@ep-shy-scene-31828553.us-east-1.aws.neon.tech:5432/verceldb?sslmode=require"
}

model User {
    id        String   @id @default(uuid()) @db.VarChar(255)
    username  String   @db.VarChar(255)
    email     String   @unique @db.VarChar(255)
    password  String?  @db.VarChar(255)
    googleId  String?
    avatarUrl String?  @db.VarChar(255)
    createdAt DateTime @default(now()) @db.Timestamp(6)

    sessions Session[]

    @@map("users")
}

model Session {
    id        String   @id @default(cuid()) @db.VarChar(255)
    userId    String   @db.VarChar(255)
    expiresAt DateTime @db.Timestamp(6)
    user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

    @@map("sessions")
}

model Product {
    id                 String   @id @default(uuid()) @db.VarChar(255)
    productName        String   @db.VarChar(255)
    productDescription String?  @db.VarChar(255)
    productUrl         String?  @db.VarChar(255)
    quantity           Int      @db.Integer
    cost               Int      @db.Integer
    currency           String   @db.VarChar(255)
    isActive           Boolean  @default(true)
    createdAt          DateTime @default(now()) @db.Timestamp(6)

    cartLineItems CartLineItem[]

    @@map("products")
}

model Cart {
    id        String   @id @default(uuid()) @db.VarChar(255)
    isActive  Boolean  @default(true)
    expiresAt DateTime @db.Timestamp(6)
    createdAt DateTime @default(now()) @db.Timestamp(6)

    cartLineItems CartLineItem[]

    @@map("carts")
}

model CartLineItem {
    id        String   @id @default(uuid()) @db.VarChar(255)
    productId String   @db.VarChar(255)
    quantity  Int
    createdAt DateTime @default(now()) @db.Timestamp(6)
    cartId    String   @db.VarChar(255)

    cart    Cart    @relation(fields: [cartId], references: [id], onDelete: Cascade)
    product Product @relation(fields: [productId], references: [id], onDelete: Cascade)

    @@map("cart_line_items")
}
